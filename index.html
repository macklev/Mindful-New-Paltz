<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MindPath</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>MindPath</h1>
    <p>Where New Paltz students can find activities and groups to support their mental health and become more involved in the community.</p>
   <nav>
    <a href="progress.html">Progress</a>
    <button id="logoutBtn" class="logout-btn">Logout</button>
  </nav>
  </header>

  <main id="mainContent">
    <aside class="sidebar">
      <h2>Filters</h2>
      <div class="filters">
        <div class="button-group">
          <h3>Season</h3>
          <button class="season-btn" data-season="Fall">Fall</button>
          <button class="season-btn" data-season="Winter">Winter</button>
          <button class="season-btn" data-season="Spring">Spring</button>
          <button class="season-btn" data-season="Summer">Summer</button>
        </div>

        <div class="button-group">
          <h3>Type</h3>
          <button class="type-btn" data-type="Nature">Nature</button>
          <button class="type-btn" data-type="Movement">Movement</button>
          <button class="type-btn" data-type="Community">Community</button>
          <button class="type-btn" data-type="Service">Service</button>
        </div>

        <div class="button-group">
          <h3>Price</h3>
          <button class="price-btn" data-price="Free">Free</button>
          <button class="price-btn" data-price="$">$</button>
          <button class="price-btn" data-price="$$">$$</button>
          <button class="price-btn" data-price="$$$">$$$</button>
        </div>

        <div class="button-group">
          <h3>Distance</h3>
          <button class="distance-btn" data-distance="On campus">On campus</button>
          <button class="distance-btn" data-distance="In New Paltz">In New Paltz</button>
          <button class="distance-btn" data-distance="Hudson Valley">Hudson Valley</button>
        </div>
      </div>
    </aside>

    <section id="activityContainer"></section>
  </main>

  <script src="script.js"></script>
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

  // Firebase config (same as in landpagecode.js)
  const firebaseConfig = {
    apiKey: "AIzaSyAkDznWz6eGV1ccnzmhFK3Ou4PyL3X_68s",
    authDomain: "mindful-new-paltz.firebaseapp.com",
    projectId: "mindful-new-paltz",
  };

  // Initialize Firebase only once
  let app;
  try {
    app = initializeApp(firebaseConfig);
  } catch (e) {
    // ignore "already exists" error
  }

  const auth = getAuth();

  // Redirect to landing page if user not logged in
  onAuthStateChanged(auth, (user) => {
    if (!user) {
      window.location.href = "Landingpage.html"; // redirect if logged out
    }
  });

  // Handle logout button click
  const logoutBtn = document.getElementById("logoutBtn");
  if (logoutBtn) {
    logoutBtn.addEventListener("click", async () => {
      try {
        await signOut(auth);
        console.log("âœ… Logged out successfully");
        window.location.href = "Landingpage.html";
      } catch (error) {
        console.error("Error logging out:", error);
        alert("Error logging out. Try again.");
      }
    });
  }
</script>
</body>
</html>
